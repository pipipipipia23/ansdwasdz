if getgenv().bulonluon == nil then
-- getgenv().webhooknek = "https://discord.com/api/webhooks/883171082658517012/UC_sQL4RCgXtI25L9As3QAfDU8bYjpsMB0DXWPc695uYWMjD-YJIan12UPVonbOvFzwI"
if not game:IsLoaded() then game.Loaded:Wait() end
repeat wait() until game.Players
repeat wait() until game.Players.LocalPlayer
repeat wait() until game.ReplicatedStorage
repeat wait() until game:GetService("Players").LocalPlayer:FindFirstChild("PlayerGui")
repeat wait() until game:GetService("Players").LocalPlayer.PlayerGui:FindFirstChild("Main")
repeat wait() until game:GetService("Players").LocalPlayer.PlayerGui.Main.Right
repeat wait() until game:GetService("Workspace"):FindFirstChild("__MAP")
local Client = require(game.ReplicatedStorage.Library.Client)
local Orbs = getsenv(game.Players.LocalPlayer.PlayerScripts.Scripts.Game.Orbs)
local Lootbags = getsenv(game.Players.LocalPlayer.PlayerScripts.Scripts.Game.Lootbags)
getrenv().require = getgenv().require -- method tvk hihi (iu tvk vcl)
debug.setupvalue(Client.Network.Invoke, 1, function() return true end)
debug.setupvalue(Client.Network.Fire, 1, function() return true end)
local hihi = getsenv(game:GetService("Players").LocalPlayer.PlayerScripts.Scripts.GUIs.Teleport)
local v1 = require(game.ReplicatedStorage:WaitForChild("Framework"):WaitForChild("Library"))
local PlaceID = game.PlaceId
local AllIDs = {}
local foundAnything = ""
local actualHour = os.date("!*t").hour
local Deleted = false
local File = pcall(function()
    AllIDs = game:GetService('HttpService'):JSONDecode(readfile("NotSameServers.json"))
end)
if not File then
    table.insert(AllIDs, actualHour)
    writefile("NotSameServers.json", game:GetService('HttpService'):JSONEncode(AllIDs))
end
cac = 0
for i,v in pairs(AllIDs) do
    cac = cac + 1
end
if cac >= 15 then
    AllIDs = {}
    writefile("NotSameServers.json", game:GetService('HttpService'):JSONEncode(AllIDs))
end
function TPReturner()
    local Site;
    if foundAnything == "" then
        Site = game.HttpService:JSONDecode(game:HttpGet('https://games.roblox.com/v1/games/' .. PlaceID .. '/servers/Public?sortOrder=Asc&limit=100'))
    else
        Site = game.HttpService:JSONDecode(game:HttpGet('https://games.roblox.com/v1/games/' .. PlaceID .. '/servers/Public?sortOrder=Asc&limit=100&cursor=' .. foundAnything))
    end
    local ID = ""
    if Site.nextPageCursor and Site.nextPageCursor ~= "null" and Site.nextPageCursor ~= nil then
        foundAnything = Site.nextPageCursor
    end
    local num = 0;
    for i,v in pairs(Site.data) do
        local Possible = true
        ID = tostring(v.id)
        if tonumber(v.playing) <= 11 then
            for _,Existing in pairs(AllIDs) do
                if num ~= 0 then
                    if ID == tostring(Existing) then
                        Possible = false
                    end
                else
                    if tonumber(actualHour) ~= tonumber(Existing) then
                        local delFile = pcall(function()
                            -- delfile("NotSameServers.json")
                            AllIDs = {}
                            table.insert(AllIDs, actualHour)
                        end)
                    end
                end
                num = num + 1
            end
            if Possible == true then
                table.insert(AllIDs, ID)
                wait()
                pcall(function()
					print("monimoni")
                    writefile("NotSameServers.json", game:GetService('HttpService'):JSONEncode(AllIDs))
                    wait()
                    game:GetService("TeleportService"):TeleportToPlaceInstance(PlaceID, ID, game.Players.LocalPlayer)
                end)
                wait(4)
            end
        end
    end
end

function TeleportSHOP()
    pcall(function()
        TPReturner()
        if foundAnything ~= "" then
            TPReturner()
        end
    end)
end	
function getcommet()
    local getcomets = Client.Network.Invoke("Comets: Get Data")
    for i,v in pairs(getcomets) do
        if getcomets[i].AreaId ~= "Town" and v1.WorldCmds.HasArea(getcomets[i].AreaId) then
            return {getcomets[i].CoinId , getcomets[i].AreaId}
        end
    end
    return false
end


workspace.__THINGS.Orbs.ChildAdded:Connect(function(v)
    pcall(function()
        Orbs.Collect(v)
    end)
end)

workspace.__THINGS.Lootbags.ChildAdded:Connect(function(v)
    pcall(function()
        Lootbags.Collect(v)
    end)
end)

getgenv().hasfarm = false

local Save = v1.Save.Get
local Commas = v1.Functions.Commas

function get(thistype)
    if game.PlaceId == 10321372166 and string.find(string.lower(thistype), "coins") then
        return Save().HardcoreCurrency[thistype]
    else
        return Save()[thistype]
    end
end
-- function sendwebhook(title)
--     pcall(function()
--         local url = getgenv().webhooknek
--         local data = {
--         ["content"] = "Auto Comet",
--         ["embeds"] = {
--             {
--                 ["title"] = "Noti!",
--                 ["description"] = "Username: " .."||".. game.Players.LocalPlayer.Name.. "||".. "\nDiamond You Got: " ..  title,
--                 ["type"] = "rich",
--                 ["color"] = tonumber(0xff8200),
--             }
--         }
--         }
--         local newdata = game:GetService("HttpService"):JSONEncode(data)
    
--         local headers = {
--         ["content-type"] = "application/json"
--         }
--         request = http_request or request or HttpPost or syn.request
--         local abcdef = {Url = url, Body = newdata, Method = "POST", Headers = headers}
--         request(abcdef)
--     end)
-- end
-- local dbuiquanre = get("Diamonds")
-- local UserInputService = game:GetService("UserInputService")
-- local RunService = game:GetService("RunService")

-- local Initialize = function()
--     RunService:Set3dRenderingEnabled(false)
-- end
-- pcall(Initialize)
spawn(function()
    while true do wait(1)
        pcall(function()
            if getcommet() ~= false then
                if not game:GetService("Workspace")["__THINGS"].Coins:FindFirstChild(getcommet()[1]) then
                    hihi.Teleport(getcommet()[2],true)
                    wait(5)
                else
                    for i1,v1 in pairs(Client.PetCmds.GetEquipped()) do
                        if getcommet() ~= false then
                            getgenv().hasfarm = true
                            Client.Network.Invoke('Join Coin', getcommet()[1], {v1.uid})
                            Client.Network.Fire('Farm Coin', getcommet()[1], v1.uid)
                        end
                    end
                end
            else
                -- if getcommet() == false and getgenv().hasfarm == true and getgenv().webhooknek ~= "" then
                --     wait(7)
                --     sendwebhook(tostring(Commas(get("Diamonds") - dbuiquanre)))
                --     getgenv().hasfarm = false
                -- end
                if getcommet() == false and getgenv().hasfarm == true then
                    wait(7)
                    TeleportSHOP()
                elseif getcommet() == false then
                    TeleportSHOP()
                end
            end
        end)
    end
end)
getgenv().bulonluon = true
end
